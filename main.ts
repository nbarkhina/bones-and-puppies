enum ActionKind {
    RunningLeft,
    RunningRight,
    Idle,
    IdleLeft,
    IdleRight,
    JumpingLeft,
    JumpingRight,
    CrouchLeft,
    CrouchRight,
    Flying,
    Walking,
    Jumping
}
namespace SpriteKind {
    export const Cat = SpriteKind.create()
    export const Goal = SpriteKind.create()
    export const Coin = SpriteKind.create()
    export const Flier = SpriteKind.create()
    export const Fire = SpriteKind.create()
}

let playerStartLocation: tiles.Location = null
let flier: Sprite = null
let levelCount = 0
let gravity = 0
let coin: Sprite = null
let fire: Sprite = null
let doubleJumpSpeed = 0
// let mainIdleRight: animation.Animation
// let mainIdleLeft: animation.SpriteAnimation = null
// let flierIdle: animation.SpriteAnimation = null
// let coinAnimation: animation.SpriteAnimation = null
let cat: Sprite = null
let debugStats = ""
let heroFacingLeft = false
let hasFire = false
let canDoubleJump = false
let currentLevel = 0
let pixelsToMeters = 0
let invincibilityPeriod = 0
let hero: Sprite = null
let flierFlying = null
let mainRunLeft = null
let mainRunRight = null
let mainJumpLeft = null
let mainJumpRight = null
let mainCrouchLeft = null
let mainCrouchRight = null
let suckPipe = false;
let suckPipeTimer = 0;
let suckLocation: tiles.Location;


function initializeAnimations() {
    // coin animations
    /*

    coinAnimation = new animation.SpriteAnimation()
    // coinAnimation = createAnimation(ActionKind.Idle, 200)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . f 5 f 5 5 5 5 5 f . . . . 
        . . f 5 f 5 5 5 4 5 5 f . . . . 
        . . f 5 f 5 5 5 4 4 5 5 f . . . 
        . . f 5 f 5 5 5 4 4 5 5 f . . . 
        . . f 5 f 5 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 5 5 5 f . . . . 
        . . . . f 5 f 5 5 5 f . . . . . 
        . . . . f f f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . f f 5 f 5 f f . . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . f 5 f 5 5 5 5 f f . . . . 
        . . . f 5 f 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 4 5 5 f . . . . 
        . . . f 5 f 5 5 5 5 f f . . . . 
        . . . f f 5 f 5 5 5 f . . . . . 
        . . . . f f 5 f 5 f f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . f 5 f 5 f f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 5 f . . . . . 
        . . . . . f 5 f 5 f f . . . . . 
        . . . . . f f f f f . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . f f 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f 5 5 f 5 f . . . . . 
        . . . . . f f 5 f 5 f . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . f f 5 f 5 f f . . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . f f 5 5 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 f 5 f . . . 
        . . . . f f 5 5 5 5 f 5 f . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . . f f 5 f 5 f f . . . . 
        . . . . . . f f f f f . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    coinAnimation.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . f 5 5 5 f 5 f f . . . 
        . . . . f 5 5 5 5 5 f 5 f . . . 
        . . . . f 5 5 4 5 5 5 f 5 f . . 
        . . . f 5 5 4 4 5 5 5 f 5 f . . 
        . . . f 5 5 4 4 5 5 5 f 5 f . . 
        . . . . f 5 5 4 5 5 5 f 5 f . . 
        . . . . f 5 5 5 5 5 f 5 f . . . 
        . . . . . f 5 5 5 f 5 f . . . . 
        . . . . . . f f f f f f . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
    // initializeFlierAnimations
    flierIdle = animation.createAnimation(ActionKind.Idle, 100)
    flierIdle.addAnimationFrame(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . e e e e . . . . . . . 
        . . . . . e e e e . . . . . . . 
        . . . . . e e e e . . . . . . . 
        . . . . . e e e e . . . . . . . 
        . . . . . e e e e . . . . . . . 
        8 8 8 8 8 8 8 8 8 8 8 . . . . . 
        8 8 8 8 8 8 8 8 8 8 8 . . . . . 
        8 8 8 8 8 8 8 8 8 8 8 . . . . . 
        8 8 8 f 8 8 8 8 f 8 8 . . . . . 
        8 8 8 8 8 8 8 8 8 8 8 . . . . . 
        8 8 8 8 8 8 8 8 8 8 8 e e e e . 
        8 8 8 f f f f f 8 8 8 e e e e . 
        8 8 8 f 8 8 8 f 8 8 8 . . . . . 
        8 8 8 f 8 8 8 f 8 8 8 . . . . . 
        `)
        
    mainIdleLeft = animation.createAnimation(ActionKind.IdleLeft, 100)
    animation.attachAnimation(hero, mainIdleLeft)
    mainIdleLeft.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        55555555555555555...............
        5a555555555555a55...............
        .a55fff555fff5a.................
        ..55f1f555f1f5..................
        ..55fffff5fff5555e55555555......
        ..5555fff555555555555555e555e558
        ..55555f5555555e55e55e5555e55558
        ..55555f555555555555555555......
        ..555fffff5555.555.555.55.......
        ......3f3......555.555.55.......
        ......3f3......fff.fff.ff.......
        ......3f3.......................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
    mainIdleRight = animation.createAnimation(ActionKind.IdleRight, 100)
    animation.attachAnimation(hero, mainIdleRight)
    mainIdleRight.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............55555555555555555
        ...............55a555555555555a5
        .................a5fff555fff55a.
        ..................5f1f555f1f55..
        ......55555555e5555fff5fffff55..
        855e555e555555555555555fff5555..
        85555e5555e55e55e5555555f55555..
        ......555555555555555555f55555..
        .......55.555.555.5555fffff555..
        .......55.555.555......3f3......
        .......ff.fff.fff......3f3......
        .......................3f3......
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
        */
}
function attemptJump() {
    // else if: either fell off a ledge, or double jumping
    if (hero.isHittingTile(CollisionDirection.Bottom)) {
        hero.vy = -5 * pixelsToMeters
    }
    // else if (canDoubleJump) {
    //     doubleJumpSpeed = -54 * pixelsToMeters
    //     // Good double jump
    //     if (hero.vy >= -40) {
    //         doubleJumpSpeed = -5 * pixelsToMeters
    //         hero.startEffect(effects.trail, 500)
    //         scene.cameraShake(2, 250)
    //     }
    //     hero.vy = doubleJumpSpeed
    //     canDoubleJump = false
    // }
}
function spawnFire() {
    fire = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        2 2 2 2 2 2 2 . . . . . . . . . 
        2 2 2 2 2 2 2 . . . . . . . . . 
        2 2 2 2 2 2 2 . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Fire)
    fire.setPosition(hero.x, hero.y)
    if (heroFacingLeft) {
        fire.setVelocity(-160, 0)
    } else {
        fire.setVelocity(160, 0)
    }
    fire.startEffect(effects.fire)
}
function setLevelTileMap(level: number) {
    clearGame()
    if (level == 0) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 1) {
        tiles.setTilemap(tilemap`levelMaddy2`)
    } else if (level == 2) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 3) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 4) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 5) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 6) {
        tiles.setTilemap(tilemap`levelMaddy`)
    } else if (level == 7) {
        tiles.setTilemap(tilemap`levelMaddy`)
    }
    initializeLevel(level)
}
function spawnCoins() {
    for (let value7 of tiles.getTilesByType(assets.tile`coin`)) {
        coin = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . f f f f . . . . . . 
            . . . . f f 5 5 5 5 f f . . . . 
            . . . . f 5 5 5 5 5 5 f . . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . f 5 5 5 4 4 5 5 5 f . . . 
            . . . . f 5 5 5 5 5 5 f . . . . 
            . . . . f f 5 5 5 5 f f . . . . 
            . . . . . . f f f f . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.Coin)
        tiles.placeOnTile(coin, value7)
        runCoinAnimation();
        tiles.setTileAt(value7, assets.tile`blank2`)
    }
}

function runCoinAnimation()
{
    animation.runImageAnimation(
        coin,
        [
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . f f 5 5 5 5 f f . . . .
        . . . . f 5 5 5 5 5 5 f . . . .
        . . . f 5 5 5 4 4 5 5 5 f . . .
        . . . f 5 5 5 4 4 5 5 5 f . . .
        . . . f 5 5 5 4 4 5 5 5 f . . .
        . . . f 5 5 5 4 4 5 5 5 f . . .
        . . . . f 5 5 5 5 5 5 f . . . .
        . . . . f f 5 5 5 5 f f . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . f f f f f f . . . . . .
        . . . f f 5 f 5 5 5 f . . . . .
        . . . f 5 f 5 5 5 5 5 f . . . .
        . . f 5 f 5 5 5 4 5 5 f . . . .
        . . f 5 f 5 5 5 4 4 5 5 f . . .
        . . f 5 f 5 5 5 4 4 5 5 f . . .
        . . f 5 f 5 5 5 4 5 5 f . . . .
        . . . f 5 f 5 5 5 5 5 f . . . .
        . . . . f 5 f 5 5 5 f . . . . .
        . . . . f f f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . f f f f f . . . . . .
        . . . . f f 5 f 5 f f . . . . .
        . . . f f 5 f 5 5 5 f . . . . .
        . . . f 5 f 5 5 5 5 f f . . . .
        . . . f 5 f 5 5 4 5 5 f . . . .
        . . . f 5 f 5 5 4 5 5 f . . . .
        . . . f 5 f 5 5 5 5 f f . . . .
        . . . f f 5 f 5 5 5 f . . . . .
        . . . . f f 5 f 5 f f . . . . .
        . . . . . f f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . f f f f f . . . . . .
        . . . . . f 5 f 5 f f . . . . .
        . . . . . f 5 f 5 5 f . . . . .
        . . . . . f 5 f 5 5 f . . . . .
        . . . . . f 5 f 5 5 f . . . . .
        . . . . . f 5 f 5 5 f . . . . .
        . . . . . f 5 f 5 f f . . . . .
        . . . . . f f f f f . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . f f f f f . . . . .
        . . . . . f f 5 f 5 f . . . . .
        . . . . . f 5 5 f 5 f . . . . .
        . . . . . f 5 5 f 5 f . . . . .
        . . . . . f 5 5 f 5 f . . . . .
        . . . . . f 5 5 f 5 f . . . . .
        . . . . . f f 5 f 5 f . . . . .
        . . . . . . f f f f f . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f f . . . . .
        . . . . . f f 5 f 5 f f . . . .
        . . . . . f 5 5 5 f 5 f f . . .
        . . . . f f 5 5 5 5 f 5 f . . .
        . . . . f 5 5 4 5 5 f 5 f . . .
        . . . . f 5 5 4 5 5 f 5 f . . .
        . . . . f f 5 5 5 5 f 5 f . . .
        . . . . . f 5 5 5 f 5 f f . . .
        . . . . . f f 5 f 5 f f . . . .
        . . . . . . f f f f f . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
            img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . f f f f f f . . . .
        . . . . . f 5 5 5 f 5 f f . . .
        . . . . f 5 5 5 5 5 f 5 f . . .
        . . . . f 5 5 4 5 5 5 f 5 f . .
        . . . f 5 5 4 4 5 5 5 f 5 f . .
        . . . f 5 5 4 4 5 5 5 f 5 f . .
        . . . . f 5 5 4 5 5 5 f 5 f . .
        . . . . f 5 5 5 5 5 f 5 f . . .
        . . . . . f 5 5 5 f 5 f . . . .
        . . . . . . f f f f f f . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    ],
        200,
        true
    )
}

function processCollisions() {
    sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
        otherSprite.destroy(effects.trail, 250)
        otherSprite.y += -3
        info.changeScoreBy(3)
        music.baDing.play()
    })
    sprites.onOverlap(SpriteKind.Player, SpriteKind.Cat, function (sprite, otherSprite) {
        if (sprite.vy > 0 && !(sprite.isHittingTile(CollisionDirection.Bottom)) || sprite.y < otherSprite.top) {
            otherSprite.destroy(effects.ashes, 250)
            otherSprite.vy = -50
            sprite.vy = -2 * pixelsToMeters
            info.changeScoreBy(1)
            music.powerUp.play()
        } else {
            info.changeLifeBy(-1)
            sprite.say("Ow!", invincibilityPeriod)
            music.powerDown.play()
        }
        pause(invincibilityPeriod)
    })
    sprites.onOverlap(SpriteKind.Player, SpriteKind.Flier, function (sprite, otherSprite) {
        info.changeLifeBy(-1)
        sprite.say("Ow!", invincibilityPeriod * 1.5)
        music.powerDown.play()
        pause(invincibilityPeriod * 1.5)
    })
    scene.onHitWall(SpriteKind.Fire, function (sprite, location) {
        sprite.destroy()
    })
    scene.onOverlapTile(SpriteKind.Player, assets.tile`pipe`, function (sprite, location) {
        if (!suckPipe) {
            music.beamUp.play();
            suckPipeTimer = 120;
            suckPipe = true;
            suckLocation = location;
        }
    })
    scene.onOverlapTile(SpriteKind.Player, assets.tile`flag`, function (sprite, location) {
        info.changeLifeBy(1)
        currentLevel += 1
        if (hasNextLevel()) {
            game.splash("Next level unlocked!")
            setLevelTileMap(currentLevel)
        } else {
            game.over(true, effects.confetti)
        }
    })
    sprites.onOverlap(SpriteKind.Fire, SpriteKind.Cat, function (sprite, otherSprite) {
        sprite.destroy()
        otherSprite.destroy()
    })
    sprites.onOverlap(SpriteKind.Fire, SpriteKind.Flier, function (sprite, otherSprite) {
        sprite.destroy()
        otherSprite.destroy()
    })
    scene.onOverlapTile(SpriteKind.Player, assets.tile`myFlower`, function (sprite, location) {
        // clear flower tile
        tiles.setTileAt(location, assets.tile`blank2`)
        music.powerUp.play()
        hasFire = true
    })
}
function clearGame() {
    for (let value of sprites.allOfKind(SpriteKind.Cat)) {
        value.destroy()
    }
    for (let value2 of sprites.allOfKind(SpriteKind.Coin)) {
        value2.destroy()
    }
    for (let value3 of sprites.allOfKind(SpriteKind.Goal)) {
        value3.destroy()
    }
    for (let value4 of sprites.allOfKind(SpriteKind.Flier)) {
        value4.destroy()
    }
    for (let value5 of sprites.allOfKind(SpriteKind.Fire)) {
        value5.destroy()
    }
}
// show beginning instructions
showInstruction("Hello! Meet Tunie. Tunie wants to beat this world! Can you help her beat this world? I will warn you there will be consequences in this world!")
showInstruction("Game Designer: Madelyn Barkhina.\n Game Programmer: Neil Barkhina");
showInstruction("Tester: Kimberly Barkhina\nTester: Lindsay Barkhina");
showInstruction("Hero: Tunie the dog\n Bad Guy: Cooper the cat");
showInstruction("Game Inspiration: Everything!");
function showStartingInstructions() {
    // dialog frame and icon
    game.setDialogFrame(img`
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 1 1 1 1 1 1 1 1 1 2 1 2 . 
        2 1 2 2 1 1 1 1 1 1 1 2 2 1 2 . 
        2 1 1 2 2 2 2 2 2 2 2 2 1 1 2 . 
        2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 . 
        . 2 2 2 2 2 2 2 2 2 2 2 2 2 . . 
        . . . . . . . . . . . . . . . . 
        `)
    game.setDialogCursor(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . f 5 5 5 4 4 5 5 5 f . . . 
        . . . . f 5 5 5 5 5 5 f . . . . 
        . . . . f f 5 5 5 5 f f . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `)
}
function init() {
    // the order of these things matters - careful when rearranging these
    // how long to pause between each contact with a single enemy
    invincibilityPeriod = 600
    pixelsToMeters = 30
    gravity = 9.81 * pixelsToMeters
    processCollisions()
    gameUpdate()
    controllerInput()
    // create player
    hero = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............55555555555555555
        ...............55a555555555555a5
        .................a5fff555fff55a.
        ..................5f1f555f1f55..
        ......55555555e5555fff5fffff55..
        855e555e555555555555555fff5555..
        85555e5555e55e55e5555555f55555..
        ......555555555555555555f55555..
        .......55.555.555.5555fffff555..
        .......55.555.555......3f3......
        .......ff.fff.fff......3f3......
        .......................3f3......
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, SpriteKind.Player)
    createPlayer(hero)
    // set background image/color
    scene.setBackgroundImage(img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        `)
    initializeAnimations()
    levelCount = 8
    currentLevel = 0
}
function createEnemies() {
    // enemy that moves back and forth
    // if (Math.percentChance(50)) {
    // cat.vx = Math.randomRange(30, 60)
    // } else {
    // cat.vx = Math.randomRange(-60, -30)
    // }
    for (let value52 of tiles.getTilesByType(assets.tile`cat`)) {
        cat = sprites.create(img`
            .........7777.......77337.......
            .........7777.......73377.......
            ........773377.....7733777......
            ......77773377fffff7733777......
            .....777773377fffff7733777......
            ....7777773337fffff7333777......
            ...77777773337fffff7333777......
            ...77777773337fffff73337777.....
            ...77777773337fffff73337777.....
            ..777777777777fffff77777777.....
            ..777777777777fffff77777777.....
            .77777777777f7777777f777777.....
            .77777777777777777777777777.....
            .7777777777777eeeee777777777....
            7777777777777777e77777777777....
            77777777777777eeeeee77777777....
            77777777777777eeeeee77777777....
            77777777777777ee33ee77777777....
            77777777777777ee33ee77777777....
            77777777777777ee33ee77777777....
            777777777777777777777777777777..
            7777777777777777777777777777777.
            7777777777777777777777777777777.
            77777777777777777777777777777777
            7777777fff77777777ff7f7777777777
            fff777ffff7777777fffff777777777.
            fff777ffff7777777ffff77777ffff77
            7ff777ffff77777777fff77777fff77.
            7ff777ffff7777777ffff77777fff77.
            7777777f7777777777fff77777fff77.
            7...7.777.7.77...77777777777777.
            ....7.................7.........
            `, SpriteKind.Cat)
        tiles.placeOnTile(cat, value52)
        tiles.setTileAt(value52, assets.tile`blank2`)
        cat.y -= 10;
        cat.ay = gravity
    }
    // enemy that flies at player
    for (let value6 of tiles.getTilesByType(assets.tile`flier`)) {
        flier = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . e e e e . . . . . . . 
            . . . . . e e e e . . . . . . . 
            . . . . . e e e e . . . . . . . 
            . . . . . e e e e . . . . . . . 
            . . . . . e e e e . . . . . . . 
            8 8 8 8 8 8 8 8 8 8 8 . . . . . 
            8 8 8 8 8 8 8 8 8 8 8 . . . . . 
            8 8 8 8 8 8 8 8 8 8 8 . . . . . 
            8 8 8 f 8 8 8 8 f 8 8 . . . . . 
            8 8 8 8 8 8 8 8 8 8 8 . . . . . 
            8 8 8 8 8 8 8 8 8 8 8 e e e e . 
            8 8 8 f f f f f 8 8 8 e e e e . 
            8 8 8 f 8 8 8 f 8 8 8 . . . . . 
            8 8 8 f 8 8 8 f 8 8 8 . . . . . 
            `, SpriteKind.Flier)
        tiles.placeOnTile(flier, value6)
        tiles.setTileAt(value6, assets.tile`blank2`)
        // animation.attachAnimation(flier, flierFlying)
        // animation.attachAnimation(flier, flierIdle)
    }
}
function showInstruction(text: string) {
    game.showLongText(text, DialogLayout.Bottom)
    music.baDing.play()
    info.changeScoreBy(1)
}
function gameUpdate() {
    game.onUpdate(function () {

        //sucked into pipe
        // hero.say("timer: " + suckPipeTimer);

        if (suckPipe) {
            suckPipeTimer--;
            hero.scale = suckPipeTimer / 100;
            if (suckPipeTimer == 60) {
                tiles.setTileAt(suckLocation, assets.tile`blank2`)
                suckPipe = false;
                hero.scale = 1;
                info.changeLifeBy(-1)
            }
        }

        if (hero.vx < 0) {
            heroFacingLeft = true
            hero.setImage(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        55555555555555555...............
        5a555555555555a55...............
        .a55fff555fff5a.................
        ..55f1f555f1f5..................
        ..55fffff5fff5555e55555555......
        ..5555fff555555555555555e555e558
        ..55555f5555555e55e55e5555e55558
        ..55555f555555555555555555......
        ..555fffff5555.555.555.55.......
        ......3f3......555.555.55.......
        ......3f3......fff.fff.ff.......
        ......3f3.......................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
        } else if (hero.vx > 0) {
            hero.setImage(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............55555555555555555
        ...............55a555555555555a5
        .................a5fff555fff55a.
        ..................5f1f555f1f55..
        ......55555555e5555fff5fffff55..
        855e555e555555555555555fff5555..
        85555e5555e55e55e5555555f55555..
        ......555555555555555555f55555..
        .......55.555.555.5555fffff555..
        .......55.555.555......3f3......
        .......ff.fff.fff......3f3......
        .......................3f3......
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `)
            heroFacingLeft = false
        }
        if (hero.isHittingTile(CollisionDirection.Top)) {
            hero.vy = 0
        }
        // game.consoleOverlay.setVisible(true);
        // screen.printCenter("X: " + hero.tilemapLocation().x + " Y: " + hero.tilemapLocation().y,
        // 50);
        // console.log("X: " + hero.x + " Y: " + hero.y);
        // debugStats = "X: " + Math.floor(hero.x) + " Y: " + Math.floor(hero.y)
        // hero.sayText(debugStats, 100)
    })

    game.onUpdate(function () {
        for (let value8 of sprites.allOfKind(SpriteKind.Flier)) {
            if (Math.abs(value8.x - hero.x) < 60) {
                if (value8.x - hero.x < -5) {
                    value8.vx = 25
                } else if (value8.x - hero.x > 5) {
                    value8.vx = -25
                }
                if (value8.y - hero.y < -5) {
                    value8.vy = 25
                } else if (value8.y - hero.y > 5) {
                    value8.vy = -25
                }
                // animation.setAction(value8, ActionKind.Idle)
            } else {
                value8.vy = -20
                value8.vx = 0
                // animation.setAction(value8, ActionKind.Idle)
            }
        }
    })
    game.onUpdate(function () {
        if (hero.isHittingTile(CollisionDirection.Bottom)) {
            canDoubleJump = true
        }
    })
    game.onUpdate(function () {
        for (let value9 of sprites.allOfKind(SpriteKind.Cat)) {
            if (value9.isHittingTile(CollisionDirection.Left)) {
                value9.vx = Math.randomRange(30, 60)
            } else if (value9.isHittingTile(CollisionDirection.Right)) {
                value9.vx = Math.randomRange(-60, -30)
            }
        }
    })
}
function createPlayer(player2: Sprite) {
    player2.ay = gravity
    scene.cameraFollowSprite(player2)
    controller.moveSprite(player2, 100, 0)
    player2.z = 5
    info.setLife(3)
    info.setScore(0)
}
function initializeLevel(level: number) {
    // effects.clouds.startScreenEffect()
    playerStartLocation = tiles.getTilesByType(assets.tile`player`)[0]
    tiles.placeOnTile(hero, playerStartLocation)
    tiles.setTileAt(playerStartLocation, assets.tile`blank2`)
    createEnemies()
    spawnCoins()
}
function controllerInput() {
    controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
        attemptJump()
    })
    controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
        if (hasFire) {
            spawnFire()
        }
    })
    controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
        if (!(hero.isHittingTile(CollisionDirection.Bottom))) {
            hero.vy += 80
        }
    })
    controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
        attemptJump()
    })
}
function hasNextLevel() {
    return currentLevel != levelCount
}
function main() {
    // title screen
    showStartingInstructions()
    // initialize app
    init()
    // run first level
    setLevelTileMap(currentLevel)
}
// run app
main()

